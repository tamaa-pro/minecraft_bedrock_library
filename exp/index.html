<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>موقع تجربة الكود</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
<style>
body{background:#808080;margin:0;padding:10px;font-family:Arial;height:100vh;box-sizing:border-box;overflow:hidden;display:flex;flex-direction:column}
.container{display:flex;flex-direction:column;height:100%;gap:10px}
.code-container{height:60vh;background:#000;border:2px solid #333;border-radius:5px;overflow:hidden;display:flex;flex-direction:column}
.controls{display:flex;gap:8px;padding:8px;background:#555}
.controls button{padding:8px 12px;min-width:36px;font-size:16px;transition:transform .1s}
.controls button:active{transform:scale(1.05)}
#codeArea{flex:1;padding:12px;background:#000;color:#fff;font-family:'Fira Code',monospace;font-size:14px;line-height:1.5;border:none;resize:none;white-space:pre;direction:ltr;text-align:left;overflow:auto;tab-size:4}
.options-container{background:#555;border-radius:5px;padding:12px;display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:center}
.option-group{display:flex;gap:8px;align-items:center}
button,input{padding:10px 14px;border:none;border-radius:6px;background:#444;color:#fff;cursor:pointer;white-space:nowrap;font-size:14px;transition:all .2s}
button:hover{background:#666}
#runBtn{background:#4CAF50}
#runBtn:hover{filter:brightness(1.1)}
.notification{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:#222;color:#fff;padding:12px 18px;border-radius:6px;z-index:1000;display:none;animation:fadeIn .3s;box-shadow:0 4px 12px rgba(0,0,0,.15);max-width:80%}
.notification.error{background:#d32f2f}
@keyframes fadeIn{from{opacity:0;transform:translate(-50%,-10px)}to{opacity:1;transform:translate(-50%,0)}}
.color-option{width:18px;height:18px;display:inline-block;margin-right:8px;vertical-align:middle;border:1px solid #fff;border-radius:3px}
.dropdown{position:relative;display:inline-block}
.dropdown-content{display:none;position:absolute;background:#444;min-width:200px;box-shadow:0 8px 16px rgba(0,0,0,.2);z-index:1;border-radius:6px;padding:8px;bottom:100%;left:0}
.dropdown.active .dropdown-content{display:block}
.dropdown-content button{width:100%;text-align:left;margin:4px 0;padding:8px 12px;border-radius:4px}
.toggle-switch{display:flex;align-items:center;gap:8px;color:#fff}
.switch{position:relative;display:inline-block;width:34px;height:20px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#ccc;transition:.4s;border-radius:20px}
.slider:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background:#fff;transition:.4s;border-radius:50%}
input:checked+.slider{background:#4CAF50}
input:checked+.slider:before{transform:translateX(14px)}
</style>
</head>
<body>
<div class="container">
<div class="code-container">
<div class="controls">
<button title="تراجع" id="undoBtn"><i class="fas fa-undo"></i></button>
<button title="إعادة" id="redoBtn"><i class="fas fa-redo"></i></button>
<button title="قص" id="cutBtn"><i class="fas fa-cut"></i></button>
<button title="نسخ" id="copyBtn"><i class="far fa-copy"></i></button>
<button title="لصق" id="pasteBtn"><i class="fas fa-paste"></i></button>
<button title="حذف" id="deleteBtn"><i class="far fa-trash-alt"></i></button>
</div>
<textarea id="codeArea" spellcheck="false"></textarea>
</div>
<div class="options-container">
<div class="option-group dropdown" id="colorDropdown">
<button id="colorBtn"><i class="fas fa-palette"></i> لون النص</button>
<div class="dropdown-content">
<button data-color="#ffffff" data-bg="#000000"><span class="color-option" style="background:#fff"></span>أبيض</button>
<button data-color="#000000" data-bg="#ffffff"><span class="color-option" style="background:#000"></span>أسود</button>
<button data-color="#808080" data-bg="#000000"><span class="color-option" style="background:#808080"></span>رمادي</button>
<button data-color="#90EE90" data-bg="#000000"><span class="color-option" style="background:#90EE90"></span>أخضر فاتح</button>
<button data-color="#9370DB" data-bg="#000000"><span class="color-option" style="background:#9370DB"></span>بنفسجي</button>
<button data-color="#FFD700" data-bg="#000000"><span class="color-option" style="background:#FFD700"></span>أصفر</button>
<button data-color="#FFA500" data-bg="#000000"><span class="color-option" style="background:#FFA500"></span>برتقالي</button>
</div>
</div>
<div class="option-group dropdown" id="compressDropdown">
<button id="compressBtn"><i class="fas fa-compress-alt"></i> ضغط الكود</button>
<div class="dropdown-content">
<button id="removeSpacesBtn"><i class="fas fa-minus"></i> حذف الفراغات فقط</button>
<button id="removeLineBreaksBtn"><i class="fas fa-arrow-down"></i> حذف النزول للسطر فقط</button>
<button id="compressAllBtn"><i class="fas fa-file-archive"></i> ضغط كامل</button>
</div>
</div>
<div class="option-group toggle-switch">
<label for="wrapToggle"><i class="fas fa-text-width"></i> السطر التلقائي:</label>
<label class="switch">
<input type="checkbox" id="wrapToggle" checked>
<span class="slider"></span>
</label>
</div>
<div class="option-group">
<input type="file" id="fileImport" accept=".html,.htm,.txt,.js,.css,.php" style="display:none">
<button id="importFileBtn"><i class="fas fa-file-import"></i> استيراد من ملف</button>
</div>
<div class="option-group">
<input type="text" id="urlInput" placeholder="رابط الكود">
<button id="importUrlBtn"><i class="fas fa-link"></i> استيراد من رابط</button>
</div>
<button id="exportFileBtn"><i class="fas fa-file-export"></i> حفظ كملف</button>
<button id="runBtn"><i class="fas fa-play"></i> تشغيل الكود</button>
</div>
</div>
<div class="notification" id="notification"></div>
<script>
const codeArea=document.getElementById('codeArea'),colorDropdown=document.getElementById('colorDropdown'),
compressDropdown=document.getElementById('compressDropdown'),wrapToggle=document.getElementById('wrapToggle'),
fileImport=document.getElementById('fileImport'),importFileBtn=document.getElementById('importFileBtn'),
urlInput=document.getElementById('urlInput'),importUrlBtn=document.getElementById('importUrlBtn'),
exportFileBtn=document.getElementById('exportFileBtn'),runBtn=document.getElementById('runBtn'),
undoBtn=document.getElementById('undoBtn'),redoBtn=document.getElementById('redoBtn'),cutBtn=document.getElementById('cutBtn'),
copyBtn=document.getElementById('copyBtn'),pasteBtn=document.getElementById('pasteBtn'),deleteBtn=document.getElementById('deleteBtn'),
notification=document.getElementById('notification');let history=[''],historyIndex=0;
function initEditor(){const e=localStorage.getItem('textColor')||'#ffffff',t=localStorage.getItem('textBg')||'#000000';
applyColors(e,t);const n=localStorage.getItem('wrapMode')!=='false';wrapToggle.checked=n,updateWrapMode(n);
const o=localStorage.getItem('savedCode');o&&(codeArea.value=o,history=[o]),setupEventListeners()}
function setupEventListeners(){undoBtn.addEventListener('click',undo),redoBtn.addEventListener('click',redo),
cutBtn.addEventListener('click',()=>document.execCommand('cut')),copyBtn.addEventListener('click',copyText),
pasteBtn.addEventListener('click',handlePaste),deleteBtn.addEventListener('click',handleDelete),
document.querySelectorAll('[data-color]').forEach(e=>{e.addEventListener('click',e=>{const t=e.target.getAttribute('data-color'),
n=e.target.getAttribute('data-bg');applyColors(t,n)})}),removeSpacesBtn.addEventListener('click',()=>compressCode('spaces')),
removeLineBreaksBtn.addEventListener('click',()=>compressCode('lineBreaks')),compressAllBtn.addEventListener('click',()=>compressCode('all')),
wrapToggle.addEventListener('change',()=>{const e=wrapToggle.checked;updateWrapMode(e),localStorage.setItem('wrapMode',e)}),
importFileBtn.addEventListener('click',()=>fileImport.click()),fileImport.addEventListener('change',e=>{const t=e.target.files[0];
if(!t)return;const n=new FileReader;n.onload=e=>{codeArea.value=e.target.result,saveToHistory(),saveCode(),
showNotification('تم تحميل الملف بنجاح')},n.readAsText(t)}),importUrlBtn.addEventListener('click',async()=>{const e=urlInput.value.trim();
if(!e)return;try{const t=await fetch(e);if(!t.ok)throw new Error('فشل جلب الملف');const n=await t.text();
codeArea.value=n,saveToHistory(),saveCode(),showNotification('تم تحميل الرابط بنجاح')}catch(e){showNotification('حدث خطأ أثناء جلب الملف: '+e.message,!0)}}),
exportFileBtn.addEventListener('click',()=>{const e=new Blob([codeArea.value],{type:'text/html'}),t=URL.createObjectURL(e),
n=document.createElement('a');n.href=t,n.download='index.html',n.click(),URL.revokeObjectURL(t),
showNotification('تم تحميل الملف بنجاح')}),runBtn.addEventListener('click',()=>{const e=new Blob([codeArea.value],{type:'text/html'}),
t=URL.createObjectURL(e);window.open(t,'_blank'),showNotification('تم تشغيل الكود في نافذة جديدة')}),
codeArea.addEventListener('input',()=>{saveToHistory(),saveCode()}),colorBtn.addEventListener('click',()=>{
colorDropdown.classList.toggle('active')}),compressBtn.addEventListener('click',()=>{
compressDropdown.classList.toggle('active')}),document.addEventListener('click',e=>{e.target!==colorBtn&&
!colorDropdown.contains(e.target)&&colorDropdown.classList.remove('active'),e.target!==compressBtn&&
!compressDropdown.contains(e.target)&&compressDropdown.classList.remove('active')})}
function applyColors(e,t){codeArea.style.color=e,codeArea.style.backgroundColor=t,document.documentElement.style.setProperty('--text-color',e),
document.documentElement.style.setProperty('--bg-color',t),localStorage.setItem('textColor',e),localStorage.setItem('textBg',t)}
function compressCode(e){let t=codeArea.value;switch(e){case'spaces':t=t.replace(/\s+/g,' ').trim(),
showNotification('تم حذف الفراغات الزائدة');break;case'lineBreaks':t=t.replace(/\n+/g,''),
showNotification('تم حذف النزول للسطر');break;case'all':t=t.replace(/\s+/g,''),showNotification('تم ضغط الكود بالكامل')}
codeArea.value=t,saveToHistory(),saveCode()}function updateWrapMode(e){if(e){codeArea.style.whiteSpace='pre-wrap',
codeArea.style.overflowX='hidden',codeArea.style.wordWrap='break-word'}else codeArea.style.whiteSpace='pre',
codeArea.style.overflowX='auto',codeArea.style.wordWrap='normal'}function handlePaste(){navigator.clipboard.readText().then(e=>{
const t=codeArea.selectionStart,n=codeArea.selectionEnd,o=codeArea.value;codeArea.value=o.substring(0,t)+e+o.substring(n),
codeArea.selectionStart=codeArea.selectionEnd=t+e.length,saveToHistory(),saveCode(),showNotification('تم لصق النص')}).catch(()=>{
document.execCommand('paste')})}function handleDelete(){codeArea.selectionStart===codeArea.selectionEnd?(codeArea.value='',
showNotification('تم حذف كل النص')):document.execCommand('delete'),saveToHistory(),saveCode()}
function undo(){historyIndex>0&&(historyIndex--,codeArea.value=history[historyIndex],showNotification('تم التراجع'))}
function redo(){historyIndex<history.length-1&&(historyIndex++,codeArea.value=history[historyIndex],showNotification('تم الإعادة'))}
function copyText(){codeArea.select(),document.execCommand('copy'),showNotification('تم نسخ النص')}
function saveToHistory(){codeArea.value!==history[historyIndex]&&(history=history.slice(0,historyIndex+1),
history.push(codeArea.value),historyIndex=history.length-1,history.length>50&&(history.shift(),historyIndex--)}
function saveCode(){localStorage.setItem('savedCode',codeArea.value)}
function showNotification(e,t){const n=notification;n.innerHTML=(t?'<i class="fas fa-exclamation-circle"></i> ':'')+e,
n.className='notification'+(t?' error':''),n.style.display='block',setTimeout(()=>{n.style.display='none'},2e3)}
initEditor();
</script>
</body>
</html>
