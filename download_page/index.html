<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØµÙØ­Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes jump { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.2; } }
        .loading-circle {
            width: 14px;
            height: 14px;
            border: 2px solid #000;
            border-top: 2px solid lime;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        .loading-cat {
            font-size: 16px;
            animation: jump 0.8s ease-in-out infinite;
        }
        .loading-bar {
            width: 14px;
            height: 5px;
            background: lime;
            border-radius: 3px;
            animation: blink 1s infinite;
        }
        .loading-square {
            width: 12px;
            height: 12px;
            background: lime;
            animation: spin 1s linear infinite;
        }
        body {
            margin: 0;
            overflow: hidden;
            height: 100vh;
            touch-action: none;
            user-select: none;
            font-family: Arial, sans-serif;
        }
        .toggle-box-btn {
            position: fixed;
            padding: 3px 6px;
            background: #333;
            color: #ccc;
            border-radius: 0;
            cursor: pointer;
            font-size: 10px;
            z-index: 10002;
            border: none;
        }
        #toggleSuggestionBtn { right: 0; top: 0; }
        #toggleInstructionsBtn { right: 0; bottom: 0; }
        #downloadContainer {
            position: fixed;
            inset: 0;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            overflow: hidden;
        }
        .download-box {
            background: #222;
            border-radius: 10px;
            padding: 20px 25px;
            text-align: center;
            max-width: 300px;
            width: 90%;
        }
        .download-title {
            color: #fff;
            margin-bottom: 12px;
            font-size: 20px;
        }
        #fileNameBox {
            margin-bottom: 15px;
            padding: 5px 10px;
            background: #111;
            color: #ccc;
            border-radius: 8px;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }
        #downloadBtn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 250px;
            height: 40px;
            padding: 10px;
            background: #0f0;
            color: #000;
            border-radius: 8px;
            font-weight: bold;
            text-decoration: none;
            font-size: 13px;
            transition: .2s;
        }
        #tryAnywayLink {
            display: none;
            margin-top: 10px;
        }
        #tryAnywayLink a {
            color: #ccc;
            font-size: 12px;
            text-decoration: underline;
            cursor: pointer;
        }
        #downloadSuggestion {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 10001;
            background: #222;
            padding: 10px 15px;
            color: #ccc;
            font-size: 11px;
            text-align: center;
            border-bottom: 1px solid #444;
            display: none;
        }
        .instructions-box {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #111;
            color: #ccc;
            padding: 10px 15px;
            font-size: 7px;
            line-height: 1.6;
            border-top: 1px solid #333;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <div id="downloadContainer">
        <div class="download-box">
            <h3 class="download-title">ØµÙØ­Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„</h3>
            <div id="fileNameBox">
                <span id="loader"></span>
                <span>Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù...</span>
            </div>
            <a id="downloadBtn" href="#">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù</a>
            <div id="tryAnywayLink">
                <a href="#">ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø§Ù„ØŸ</a>
            </div>
        </div>
    </div>

    <div id="downloadSuggestion">
        Ø¥Ø°Ø§ ÙƒÙ†Øª Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ Ùˆ Ù„Ø§ ØªÙ…Ù„Ùƒ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ù†Ù†ØµØ­Ùƒ Ø¨ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ùˆ Ø§Ù„ØªÙˆØµÙ„ Ø¨Ø¢Ø®Ø± Ø¥ØµØ¯Ø§Ø±Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
        <a href="https://tamaa-pro.github.io/minecraft_bedrock_library/" style="display:inline-block;margin-right:5px;margin-left:5px;padding:2px 8px;border-radius:4px;background:#0a0;color:#fff;font-size:11px;text-decoration:none">ÙØªØ­ ØµÙØ­Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„</a>
    </div>

    <div class="instructions-box">
        <b>
            â— ÙÙŠ Ø­Ø§Ù„ Ø¸Ù‡Ø±Øª ØµÙØ­Ø© Ø§Ù„Ø®Ø·Ø£ 404 ÙØ°Ù„Ùƒ Ø¨Ø³Ø¨Ø¨ Ø£Ù† Ø§Ù„Ù…Ù„Ù Ù„Ù… ÙŠØªÙ… Ù†Ø´Ø±Ù‡ Ø¨Ø¹Ø¯ ØŒ Ø£Ùˆ Ø£Ù† Ù‡Ù†Ø§Ùƒ Ø®Ø·Ø£ ÙÙŠ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„ .<br>
            â— Ø¥Ø°Ø§ Ù„Ù… ÙŠØ³ØªØ¬Ø¨ Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Ùˆ Ø¥Ø°Ø§ Ù„Ù… ÙŠØ³ØªØ®Ø±Ø¬ Ø¥Ø³Ù… Ø§Ù„Ù…Ù„Ù) ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø£Ùˆ ØªØ­Ø¯ÙŠØ«Ù‡Ø§ ØŒ Ùˆ ÙƒØ°Ù„Ùƒ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø´Ø¨ÙƒØ© .<br>
            â— Ø¥Ø°Ø§ Ø¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ§Ù„Ø­ ÙÙŠØ¹Ù†ÙŠ Ø£Ù†Ù‡ Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„ Ø£Ùˆ Ø£Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø°ÙŠ ØªØ­Ø§ÙˆÙ„ ØªØ­Ù…ÙŠÙ„Ù‡ ØºÙŠØ± Ù…ØªØ§Ø­ Ù„Ù„ØªØ­Ù…ÙŠÙ„ .<br>
            â— ÙÙŠ Ø­Ø§Ù„ Ø¥Ù†Ù‚Ø·Ø¹ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¹Ø¯Ø© Ù…Ø±Ø§Øª Ùˆ Ø§Ø³ØªÙƒÙ…Ù„ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© ØŒ ÙÙ‚Ø¯ ÙŠØ³Ø¨Ø¨ ØªÙ„Ù ÙÙŠ Ø§Ù„Ù…Ù„Ù Ùˆ ÙŠÙØ´Ù„ Ø§Ù„ØªØ«Ø¨ÙŠØª .<br>
            â— Ø¥Ø°Ø§ ÙƒÙ†Øª ØªÙ…Ù„Ùƒ Ø¥ØµØ¯Ø§Ø± Ù…Ø«Ø¨Øª Ø¨Ø§Ù„ÙØ¹Ù„ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ ÙØ¹Ù„ÙŠÙƒ Ø­Ø°ÙÙ‡ Ù‚Ø¨Ù„ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ù†Ø²Ù„Øª (Ø¥Ù„Ø§ Ø¥Ø°Ø§ Ø­Ù…Ù„Øª Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø³Ø®Ø©) Ù„Ø£Ù†Ù‡ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ù…Ù† Ø®Ø§Ø±Ø¬ Ø¨Ù„Ø§ÙŠ Ø³ØªÙˆØ± ØŒ Ùˆ Ø¨Ø§Ù„ØªØ§Ù„ÙŠ Ø³ÙŠÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø§Ù„ØªØ«Ø¨ÙŠØª .
        </b>
    </div>

    <script>
        const autoDownload = false,
              useCircle = false,
              useSquare = false,
              useBar = false,
              useCat = true;
        
        const btn = document.getElementById("downloadBtn"),
              loader = document.getElementById("loader"),
              urlParams = new URLSearchParams(location.search);
        
        let fileUrl = urlParams.get("file");

        // Ø¯Ø§Ù„Ø© Ù„ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„Ù Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ
        async function checkFileExists(url) {
            try {
                const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);
                const response = await fetch(proxyUrl, { method: 'HEAD' });
                return response.ok;
            } catch (error) {
                return false;
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ¹Ø·ÙŠÙ„ Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
        function disableDownloadBtn(reason) {
            btn.textContent = reason || "Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ§Ù„Ø­";
            btn.style.background = "#888";
            btn.style.pointerEvents = "none";
            btn.onclick = null;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø§Ø¨Ø· "ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø§Ù„" Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù…Ù„Ù ÙˆÙ„ÙƒÙ† ØºÙŠØ± Ù…ØªØ§Ø­
            if(fileUrl && reason === "Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ØªØ§Ø­") {
                const tryLink = document.getElementById("tryAnywayLink");
                tryLink.style.display = "block";
                tryLink.querySelector("a").onclick = (e) => {
                    e.preventDefault();
                    // Ù†ÙØ³ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø²Ø± Ø§Ù„Ø£ØµÙ„ÙŠ
                    tryLink.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;gap:8px"><span class="loading-circle"></span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>';
                    setTimeout(() => location.href = fileUrl, 400);
                };
            }
        }

        const showLoadingIcon = () => {
            loader.innerHTML = useCircle ? '<div class="loading-circle"></div>' :
                            useSquare ? '<div class="loading-square"></div>' :
                            useBar ? '<div class="loading-bar"></div>' :
                            useCat ? '<div class="loading-cat">ğŸˆâ€â¬›</div>' : 'â³';
        };

        const setFileName = (txt) => {
            document.getElementById("fileNameBox").innerHTML = 
                '<i class="fas fa-file-alt" style="color:#ccc;font-size:14px"></i><span style="color:#fff;font-size:13px">' + txt + '</span>';
        };

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¹Ù†Ø§ØµØ±
        function setupToggleBoxes() {
            const suggestionBox = document.getElementById("downloadSuggestion");
            const instructionsBox = document.querySelector(".instructions-box");

            // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„
            const toggleSuggestionBtn = document.createElement('button');
            toggleSuggestionBtn.id = 'toggleSuggestionBtn';
            toggleSuggestionBtn.className = 'toggle-box-btn';
            toggleSuggestionBtn.innerHTML = '<i class="fas fa-chevron-down"></i>';
            toggleSuggestionBtn.onclick = () => {
                suggestionBox.style.display = suggestionBox.style.display === 'none' ? 'block' : 'none';
            };
            document.body.appendChild(toggleSuggestionBtn);

            const toggleInstructionsBtn = document.createElement('button');
            toggleInstructionsBtn.id = 'toggleInstructionsBtn';
            toggleInstructionsBtn.className = 'toggle-box-btn';
            toggleInstructionsBtn.innerHTML = '<i class="fas fa-chevron-up"></i>';
            toggleInstructionsBtn.onclick = () => {
                instructionsBox.style.display = instructionsBox.style.display === 'none' ? 'block' : 'none';
            };
            document.body.appendChild(toggleInstructionsBtn);

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… localStorage
            if (!localStorage.getItem('suggestionShown')) {
                // Ø£ÙˆÙ„ Ù…Ø±Ø© ÙŠÙØªØ­ Ø§Ù„ØµÙØ­Ø© - Ù†Ø¹Ø±Ø¶ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙˆÙ†Ø¶Ø¨Ø· Ø§Ù„Ø¹Ù„Ø§Ù…Ø©
                suggestionBox.style.display = 'block';
                localStorage.setItem('suggestionShown', 'true');
                
                // Ø¥Ø®ÙØ§Ø¡ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¥Ù‚ØªØ±Ø§Ø­ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
                setTimeout(() => {
                    suggestionBox.style.display = 'none';
                }, 5000);
            } else {
                // Ù„ÙŠØ³ Ø£ÙˆÙ„ Ù…Ø±Ø© - Ù†Ø¨Ù‚ÙŠÙ‡ Ù…Ø®ÙÙŠÙ‹Ø§
                suggestionBox.style.display = 'none';
            }

            // Ø¥Ø®ÙØ§Ø¡ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø¹Ø¯ 6 Ø«ÙˆØ§Ù†ÙŠ (ÙŠØ¹Ù…Ù„ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©)
            setTimeout(() => {
                instructionsBox.style.display = 'none';
            }, 6000);
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø±Ø§Ø¨Ø· Ù…Ù„Ù
        if (fileUrl && fileUrl.startsWith("http")) {
            if (fileUrl.endsWith("/")) fileUrl = fileUrl.slice(0, -1);
            showLoadingIcon();

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ù„Ù
            checkFileExists(fileUrl).then(isValid => {
                if (isValid) {
                    btn.href = fileUrl;
                    btn.onclick = e => {
                        e.preventDefault();
                        btn.innerHTML = '<span class="loading-circle"></span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„';
                        btn.style.background = "#0c0";
                        btn.onclick = null;
                        setTimeout(() => location.href = fileUrl, 400);
                    };
                    
                    setTimeout(() => {
                        try {
                            let name = fileUrl.split("/").pop();
                            setFileName(name);
                        } catch {
                            setFileName("âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø§Ø³Ù…");
                        }
                    }, Math.random() * 2000 + 1000);
                } else {
                    disableDownloadBtn("Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ØªØ§Ø­");
                    setFileName("âš ï¸ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ Ù„Ù… ÙŠÙ†Ø´Ø± Ø¨Ø¹Ø¯");
                }
            }).catch(() => {
                disableDownloadBtn("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù„Ù");
                setFileName("âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„");
            });
        } else {
            setFileName("âš ï¸ Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ§Ù„Ø­");
            disableDownloadBtn();
        }

        // ØªÙ‡ÙŠØ¦Ø© ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø¥Ù‚ØªØ±Ø§Ø­Ø§Øª ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(setupToggleBoxes, 100);
        });
    </script>
</body>
</html>
